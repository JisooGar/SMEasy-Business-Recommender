<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMEasy | Barangay</title>
    <link rel="stylesheet" href="/homepage/homepage.css">
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="/recommender_page/css/recommender.css">
    <link rel="stylesheet" href="/recommender_page/css/recommender_business.css">
</head>
<body>

<!-- HEADER -->
<nav class="header">
    <div class="header-content">
        <!-- Logo and Title -->
        <div class="logo-section">
            <img src="smeasylogo.png" alt="LOGO" class="logo">
            <div class="logo-text">
                <span class="name">SMEasy</span>
                <span class="profession">Business Homepage</span>
            </div>
        </div>

        <!-- Navigation Links -->
        <ul class="nav-links">
            <li><a href="/homepage/homepage.html"><i class='bx bx-home-alt icon'></i> Homepage</a></li>
            <li><a href="/analytics/analytics.html"><i class='bx bx-bar-chart-alt-2 icon'></i> Visualization</a></li>
            <li><a href="/recommender_page/recommender.html"><i class='bx bx-pie-chart-alt icon'></i> Analysis</a></li>
            <li><a href="/about.html/aboutUs.html"><i class='bx bx-heart icon'></i> About</a></li>
        </ul>

        <!-- User Profile Dropdown -->
        <div class="user-profile">
            <button id="profileDropdownButton" class="profile-btn">
                <span class="user-initial">G</span>
            </button>
            <div id="profileDropdown" class="profile-dropdown hidden">
                <div class="profile-info">
                    <span id="userName">Geron</span>
                    <span id="userEmail">geron@example.com</span>
                </div>
                <hr>
                <div class="header-controls">
                    <a href="" id="signOutButton" class="logout"><i class='bx bx-log-out icon'></i> Logout</a>
                    <div class="dark-mode-toggle">
                        <span class="mode-text">Dark mode</span>
                        <div class="toggle-switch">
                            <span class="switch"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>

<!-- Logout Modal -->
<div id="logoutModal" class="modal" style="display: none;">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Log Out</h2>
      <p>Are you sure you want to log out?</p>
      <div class="button-container">
        <button id="confirmLogout" class="modal-btn yes-btn">Yes, Log Out</button>
        <button id="cancelLogout" class="modal-btn no-btn">No, Stay</button>
      </div>
    </div>
  </div>

<section class="home">
    <div class="container">
        <div class="left-section">
            <h2>Business Recommender</h2>

            <!-- Barangay Buttons -->
            <div id="categories-container">
                <h3>Select a Barangay</h3>
                <div id="category-buttons">
                    <button class="barangay-btn" onclick="selectBarangay(this)">Baclaran</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Banaybanay</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Banlic</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Bigaa</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Butong</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Casile</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Diezmo</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Gulod</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Mamatid</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Marinig</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Niugan</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Pittland</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Poblacion Uno</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Poblacion Dos</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Poblacion Tres</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Pulo</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">Sala</button>
                    <button class="barangay-btn" onclick="selectBarangay(this)">San Isidro</button>
                </div>
            </div>

            <!-- Proceed Button with Spinner -->
            <div class="button-section">
                <button class="btn proceed-btn" id="proceed-button" onclick="handleProceed()">Proceed</button>
            </div>
        </div>

        <div class="right-section" id="result-section" style="display:none;">
            <div id="table-container" class="scrollable-table-container">
                <h1>Top 3 Recommended Category</h1>
                <table class="styled-table">
                    <thead>
                        <tr>
                            <th>Categories</th>
                            <th>Probability Score</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Rows will be dynamically inserted here -->
                    </tbody>
                </table>
            </div>
            <!-- Analyze button with spinner below the table -->
                <div class="button-section">
                     <button class="btn analyze-btn" id="analyze-button" onclick="showSpinner(); handleAnalyze()">Analyze</button>
                </div>

            <!-- Spinner that appears in the middle of the screen -->
                <div id="loading-spinner" style="display: none;">
                    <div class="spinner"></div>
                </div>

        </div>
    </div>
</section>

<div class="recommendation-section">
    <h1>Business Recommendation for Building Your Business</h1>
    <h2 id="barangayName">BRGY NAME: [Insert Barangay Name]</h2>

    <div class="recommendation-grid">
        <!-- Business Overview -->
        <div class="grid-item">
            <h3>Business Overview</h3>
            <p>Selected Main Category: <span id="mainCategory"></span></p>
            <p>Total Businesses in Cabuyao City: <span id="totalBusinesses"></span></p>
            <p>Number of Businesses in Selected Barangay: <span id="businessesInBarangay"></span></p>
        </div>

        <!-- Analysis of Market Demand and Gaps -->
        <div class="grid-item">
            <h3>Analysis of Market Demand and Gaps</h3>
            <table class="compact-table">
                <thead>
                    <tr>
                        <th>Market Gap / Demand</th>
                        <th>Legend</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Critical Gap / High Demand</td>
                        <td><span id="highDemand"></span></td>
                    </tr>
                    <tr>
                        <td>Moderate Gap / Medium Demand</td>
                        <td><span id="mediumDemand"></span></td>
                    </tr>
                    <tr>
                        <td>Minor Gap / Low Demand</td>
                        <td><span id="lowDemand"></span></td>
                    </tr>
                    <tr>
                        <td>No Gap / Very Low Demand</td>
                        <td><span id="noDemand"></span></td>
                    </tr>
                </tbody>
            </table>
            <p>Market Demand: <span id="marketDemand"></span></p>
            <p>Business Gaps: <span id="businessGaps"></span></p>
        </div>

 <!-- Population and Segmentation Analysis -->
        <div class="grid-item">
            <h3>Population and Segmentation Analysis</h3>
            <p>Population Density: <span id="populationOverview"></span></p>
            <p>Customer Segmentation: </p>
            <br>
            <p>Psychographics: </p>
            <p>Motivation for choosing business: <span id="businessMotivation"></span></p>
            <p>Shopping Traits: <span id="shopingTraits"></span></p>
            <p>Factors for visiting new business: <span id="businessFactors"></span></p>
            <p>Shopping Style: <span id="shopingStyle"></span></p>
            <br>
            <p>Behavioral: </p>
            <p>Business Visits: <span id="businessVisits"></span></p>
            <p>Frequency Visits: <span id="frequencyVisits"></span></p>
            <p>Browsing Behavior: <span id="browsingBehavior"></span></p>
            <p>Shopping Preference: <span id="shoppingPreference"></span></p>
            <p>Satisfaction with Business: <span id="businessSatisfaction"></span></p>
            <p>Lacking Businesses: <span id="businessLacking"></span></p>
        </div>

        <!-- Competition Analysis -->
        <div class="grid-item">
            <h3>Competition Analysis</h3>
            <table class="compact-table">
                <thead>
                    <tr>
                        <th>Legend</th>
                        <th>Score</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Very High Competition</td>
                        <td>76 - 100</td>
                    </tr>
                    <tr>
                        <td>High Competition</td>
                        <td>51 - 75</td>
                    </tr>
                    <tr>
                        <td>Low Competition</td>
                        <td>26 - 50</td>
                    </tr>
                    <tr>
                        <td>Very Low Competition</td>
                        <td>0 - 25</td>
                    </tr>
                </tbody>
            </table>
            <p>Competition Density: <span id="competitionDensity"></span></p>
            <p>Direct Competitor: <span id="directCompetitor"></span></p>
            <p>Indirect Competitor: <span id="indirectCompetitor"></span></p>
            <p>Replacement: <span id="replacementCompetitor"></span></p>
        </div>

        <!-- Accessibility and Infrastructure -->
        <div class="grid-item">
            <h3>Accessibility and Infrastructure</h3>
            <div class="table-wrapper">
                <div class="table-container">
                    <table class="legend-table">
                        <thead>
                            <tr>
                                <th>Area Type Legend</th>
                                <th>Score</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Highly Favorable</td>
                                <td>76 - 100</td>
                            </tr>
                            <tr>
                                <td>Moderately Favorable</td>
                                <td>51 - 75</td>
                            </tr>
                            <tr>
                                <td>Somewhat Favorable</td>
                                <td>26 - 50</td>
                            </tr>
                            <tr>
                                <td>Unfavorable</td>
                                <td>0 - 25</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="table-container">
                    <table class="legend-table">
                        <thead>
                            <tr>
                                <th>Transport Legend</th>
                                <th>Score</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Excellent Transport</td>
                                <td>76 - 100</td>
                            </tr>
                            <tr>
                                <td>Good Transport</td>
                                <td>51 - 75</td>
                            </tr>
                            <tr>
                                <td>Limited Transport</td>
                                <td>26 - 50</td>
                            </tr>
                            <tr>
                                <td>Poor Transport</td>
                                <td>0 - 25</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <p>Area Type: <span id="areaType"></span></p>
            <p>Public Transport Access: <span id="TranspoAccess"></span></p>
            <p>Transport Challenges: <span id="TranspoChallenge"></span></p>
        </div>

        <!-- Recommendation Summary -->
        <div class="grid-item">
            <h3>Recommendation Summary</h3>
            <p id="recommendationSummary"></p>
        </div>
    </div>
</div>

<script src="/homepage/homepage.js"></script>
<script src="/recommender_page/javascript/recommender_business.js"></script>
</body>
</html>
